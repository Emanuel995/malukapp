<!-- Layout moderno sin Bootstrap grid -->
<div *ngIf="mode == 'INS' || mode == 'UPD' || mode == 'DSP'">
  <app-sale-detail [saleSelected]="saleSelected" [(mode)]="mode" (modeChange)="onModeChanged($event)"></app-sale-detail>
</div>
<div *ngIf="mode == 'LIST'" class="container">
  <div class="header">
    <h2 class="title">Ventas</h2>
    <div class="action-btn-header">
      <button class="btn btn-report" (click)="generatePDF()"><i class="bi bi-filetype-pdf"></i></button>
      <button class="btn btn-report" (click)="generateXLSX()"><i class="bi bi-filetype-xlsx"></i></button>
      <button class="btn btn-outline-success" (click)="create()">
        <i class="bi bi-plus-circle"></i>
      </button>
    </div>
  </div>

  <form class="search-form" (ngSubmit)="search()">
    <div class="search-controls">
      <div class="form-group">
        <label class="form-label" for="categories"> Fecha Desde</label>
        <input class="form-control" type="date" name="datefrom" id="datefrom" [(ngModel)]="filterDateFrom">
      </div>
      <div class="form-group">
        <label class="form-label" for="categories"> Fecha Hasta</label>
        <input class="form-control" type="date" name="dateto" id="dateto" [(ngModel)]="filterDateTo">
      </div>
      <div class="form-group">
        <label class="form-label" for="categories"> Estado</label>
        <select class="form-select" [(ngModel)]="filterStateId" name="state">
          <option [value]="0">Todos</option>
          <option [value]="1">Confirmado</option>
          <option [value]="2">Pendiente</option>
          <option [value]="3">Anulado</option>
        </select>
      </div>

    </div>
    <div>
      <button class="btn btn-search btn-outline-primary" type="submit"><i class="bi bi-search"></i></button>
    </div>
  </form>


  <div class="table-container">
    <table class="modern-table">
      <thead class="table-header">
        <tr>
          <th class="actions-column">Acciones</th>
          <th>#</th>
          <th>Fecha</th>
          <th>Forma de Pago</th>
          <th>Estado</th>
          <th style="text-align: right;">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let sale of sales" class="table-row">
          <td class="actions-cell">
            <button class="action-btn action-btn-view" (click)="view(sale)"><i class="bi bi-eye"></i></button>
            <button *ngIf="false" class="action-btn action-btn-edit" (click)="edit(sale)"><i
                class="bi bi-pencil-square"></i></button>
          </td>
          <td>{{ sale.id }}</td>
          <td class="product-name">{{ getDateFormatString(sale.date) +' '+ getTimeFormatString(sale.date) }}</td>
          <td>{{ sale.payment_name }}</td>
          <td>{{ sale.state_name }}</td>
          <td class="price-cell">{{ sale.total|currency:'$':'symbol':'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="table-pagination">
    <button class="btn-outline-success"><i class="bi bi-arrow-left-circle"></i></button>
    <button class="btn-outline-success"><a>#</a></button>
    <button class="btn-outline-success"><i class="bi bi-arrow-right-circle"></i></button>
  </div>
</div>
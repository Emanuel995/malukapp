<!-- Layout moderno sin Bootstrap grid -->
<div *ngIf="mode == 'INS' || mode == 'UPD' || mode == 'DSP'">
  <app-stock-detail [saleSelected]="saleSelected" [(mode)]="mode" (modeChange)="onModeChanged($event)"></app-stock-detail>
</div>
<div *ngIf="mode == 'LIST'" class="container">
  <div class="header">
    <h2 class="subtitle">Ajustes de Stock</h2>
    <div class="action-btn-header">
      <button *ngIf="false" class="btn btn-report" (click)="generatePDF()"><i class="bi bi-filetype-pdf"></i></button>
      <button *ngIf="false" class="btn btn-report" (click)="generateXLSX()"><i class="bi bi-filetype-xlsx"></i></button>
      <button class="btn btn-outline-success" (click)="create()">
        <i class="bi bi-plus-circle"></i>
      </button>
    </div>
  </div>

  <form class="search-form" (ngSubmit)="search()">
    <div class="search-controls">
      <div class="form-group">
        <label class="form-label" for="categories"> Fecha Desde</label>
        <input class="form-control" type="date" name="datefrom" id="datefrom" [(ngModel)]="filterDateFrom">
      </div>
      <div class="form-group">
        <label class="form-label" for="categories"> Fecha Hasta</label>
        <input class="form-control" type="date" name="dateto" id="dateto" [(ngModel)]="filterDateTo">
      </div>
      <div *ngIf="false" class="form-group">
        <label class="form-label" for="categories"> Estado</label>
        <select class="form-select" [(ngModel)]="filterStateId" name="state">
          <option class="form-option" [value]="0">Todos</option>
          <option class="form-option" [value]="1">Confirmado</option>
          <option class="form-option" [value]="2">Pendiente</option>
          <option class="form-option" [value]="3">Anulado</option>
        </select>
      </div>

    </div>
    <div>
      <button class="btn btn-search btn-outline-primary" type="submit"><i class="bi bi-search"></i></button>
    </div>
  </form>


  <div class="table-container">
    <table class="modern-table">
      <thead class="table-header">
        <tr>
          <th>#</th>
          <th>Fecha</th>
          <th>Producto</th>
          <th>Ajuste</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let sale of sales" class="table-row">
          <td  *ngIf="false" class="actions-cell"></td>
          <td>{{ sale.id }}</td>
          <td class="">{{ getDateFormatString(sale.date) +' '+ getTimeFormatString(sale.date) }}</td>
          <td class="product-name">{{ sale.items[0].product_name }}</td>
          <td class="price-cell">{{ sale.items[0].quantity }}</td>   
        </tr>
      </tbody>
    </table>
  </div>
  <div *ngIf="false" class="table-pagination">
    <button class="btn-outline-success"><i class="bi bi-arrow-left-circle"></i></button>
    <button class="btn-outline-success"><a>#</a></button>
    <button class="btn-outline-success"><i class="bi bi-arrow-right-circle"></i></button>
  </div>
</div>
<app-modal
  [show]="showModal"
  [message]="messageModal"
  (confirm)="confirmModal()"
  (cancel)="cancelModal()">
</app-modal>